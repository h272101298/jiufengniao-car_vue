webpackJsonp([6],{Hfim:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("mtWM"),r=a.n(s),o=a("P9l9"),i={name:"basetable",data:function(){return{url:"./static/vuetable.json",tableData:[],roleList:[],cur_page:1,multipleSelection:[],select_cate:"",select_word:"",del_list:[],is_search:!1,addVisible:!1,editVisible:!1,delVisible:!1,changepsw:!1,form:{username:"",password:"",confirmpassword:"",name:""},idx:-1}},created:function(){this.getData()},methods:{handleCurrentChange:function(e){this.cur_page=e,this.getData()},getData:function(){var e=this;r.a.get(o.c).then(function(t){e.tableData=t.data.data}),r.a.get(o._6).then(function(t){e.roleList=t.data.data,console.log(e.roleList)})},changPassword:function(){this.changepsw=!0},add:function(){this.addVisible=!0},handleEdit:function(e,t){this.idx=t;var a=this.tableData[e];this.form={username:a.username,name:a.name},this.editVisible=!0},handleDelete:function(e,t){this.idx=t.id,this.delVisible=!0},saveAdd:function(){var e=this;""==this.form.username||""==this.form.name?this.$message.error("请输入内容"):r.a.get(o.d,{params:{username:this.form.username,password:this.form.password,repassword:this.form.confirmpassword,name:this.form.name}}).then(function(t){"再次输入密码不一致"==t.data.msg?e.$message.error("两次密码输入不一致"):"密码不能小于6位"==t.data.msg?e.$message.error("密码不能少于6位数"):"已存在用户名"==t.data.msg?e.$message.error("已存在用户名"):"success"==t.data.msg?(e.$message.success("添加成功"),e.addVisible=!1,e.getData()):"fail"==t.data.msg&&(e.$message.error("添加管理员失败"),e.addVisible=!1)})},saveEdit:function(){var e=this;""==this.form.username||""==this.form.password||""==this.form.confimpassword||""==this.form.name?this.$message.error("请输入内容"):r.a.post(o.f,{id:this.idx,username:this.form.username,password:this.form.password,repassword:this.form.confirmpassword,name:this.form.name}).then(function(t){"再次输入密码不一致"==t.data.msg?e.$message.error("两次密码输入不一致"):"密码不能小于6位"==t.data.msg?e.$message.error("密码不能少于6位数"):"已存在用户名"==t.data.msg?e.$message.error("已存在用户名"):"success"==t.data.msg?(e.editVisible=!1,e.$message.success("修改成功"),e.getData()):"fail"==t.data.msg&&(e.$message.error("修改失败"),e.editVisible=!1)})},deleteRow:function(){var e=this;r.a.post(o.e,{id:this.idx}).then(function(t){"success"==t.data.msg?(e.$message.success("删除成功"),e.delVisible=!1,e.getData()):(e.$message.error("删除失败"),e.delVisible=!1)})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.add}},[e._v("新增")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"username",label:"管理员账号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"管理员角色",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新增",visible:e.addVisible,width:"30%"},on:{"update:visible":function(t){e.addVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"管理员账号",placeholder:"请输入账号"}},[a("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"管理员密码",placeholder:"请输入密码"}},[a("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",placeholder:"请再次输入密码"}},[a("el-input",{attrs:{type:"password"},model:{value:e.form.confirmpassword,callback:function(t){e.$set(e.form,"confirmpassword",t)},expression:"form.confirmpassword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"管理员角色"}},[a("el-select",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}},e._l(e.roleList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}))],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveAdd}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"管理员账号"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"管理员角色"}},[a("el-select",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}},e._l(e.roleList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}))],1),e._v(" "),0==e.changepsw?a("el-button",{attrs:{type:"primary"},on:{click:e.changPassword}},[e._v("修改密码")]):a("div",[a("el-form-item",{attrs:{label:"管理员密码",placeholder:"请输入新密码"}},[a("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",placeholder:"请再次输入密码"}},[a("el-input",{attrs:{type:"password"},model:{value:e.form.confirmpassword,callback:function(t){e.$set(e.form,"confirmpassword",t)},expression:"form.confirmpassword"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.delVisible,width:"300px",center:""},on:{"update:visible":function(t){e.delVisible=t}}},[a("div",{staticClass:"del-dialog-cnt"},[e._v("删除不可恢复，是否确定删除？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.delVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.deleteRow}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var n=a("VU/8")(i,l,!1,function(e){a("inu0")},"data-v-cc8045c2",null);t.default=n.exports},inu0:function(e,t){}});